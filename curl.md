# Утилита CURL (cURL - Client URL)

Присоединяйтесь к нам - [Youtube](https://www.youtube.com/channel/UCqC3c7UHtwoX2wy7fdHc6gg) и [Telegram](https://t.me/devops_mops)

<br>

**Содержание**
- [Запрос страницы](#Запрос-страницы)
- [Загрузка файлов](#Загрузка-файлов)
- [Передача и анализ заголовков](#Передача-и-анализ-заголовков)
- [Отправка POST-запроса](#Отправка-POST-запроса)
- [Измерение продолжительности соединения](#Измерение-продолжительности-соединения)
- [Использование прокси](#Использование-прокси)

<br>

**curl** — позволяет получать данные с сервера или отправлять данные на сервер из командной строки. Утилита предустановлена в большинстве дистрибутивов.

> Поддерживает большое количество протоколов - DICT, FILE, FTP, FTPS, GOPHER, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET и TFTP. Но чаще всего используется для работы с протоколами с HTTP / HTTPS.

<br>

Утилита **curl** поддерживает большое количество опций, в данном руководстве приведены самые распространенные из них. Но не забывайте про оффициальную документацию.

```
man curl
```

Время на изучение не будет потрачено впустую и вы все чаще будете использовать утилиту curl, например:
- написание скриптов
- тестирование API
- Передача и анализ заголовков

<br>

**Запрос страницы**

При выполнении команды без аргументов бедет выполнен HTTP-запрос Get, который вернет статическое содержимое страницы

```
curl http://devopsmops.com
```

<br>

Альтернативный резольв имени хоста для данного запроса

```
curl --resolve devopsmops.com:80:localhost http://devopsmops.com/api
```
> Работает аналогично добавлению хоста в файл /etc/hosts

<br>

Если запись на внешнем DNS сервере отсутствует, можно задать поле Host в заголовке сообщения

```
curl -k 1.1.1.1 -L -H "Host: http://devopsmops.com/api"
```

<br>

Игнорировать ошибки в сертификатах и самоподписанные сертификаты

```
curl -k https://devopsmops.com
```

<br>

Использование авторизации

```
curl -u <user:password> https://devopsmops.com/api
```
> Если просто передать логин, то curl запросит пароль в командной строке

<br>

**Загрузка файлов**

Скачать файл и сохранить без изменения имени

```
curl -O http://devopsmops.com/archive.tar.gz
```

<br>

Скачать файл и сохранить его с другим именем

```
curl -o my_archive.tar.gz http://devopsmops.com/archive.tar.gz
```

<br>

**Передача и анализ заголовков**

Получить заголовок без тела документа

```
curl -I http://devopsmops.com
```

<br>

**Отправка POST-запроса**

Отправить данные ключ-значение

```
curl -X 'PUT' -d "foo=bar&bar=foo" http://devopsmops.com
```

<br>

Отправить данные в формате JSON

```
curl -X 'PUT' -d '{"foo":"bar","bar":"foo"}' http://devopsmops.com
```

<br>

**Измерение продолжительности соединения**

Вы также можете использовть culr для диагностики неисправностей, например команада

```
curl -w "%{time_total}\n" -o /dev/null -s http://devopsmops.com
```

отобразит длительность успешного выполнения запроса. Это позволит определить время общее загрузки страницю или файла.

<br>

**Использование прокси**

```
curl -x proxy.my.local:3128 http://devopsmops.com
```

<br>

---

Еще больше информации на наших [Youtube](https://www.youtube.com/channel/UCqC3c7UHtwoX2wy7fdHc6gg) и [Telegram](https://t.me/devops_mops) каналах!

Ваш Mops Devops!